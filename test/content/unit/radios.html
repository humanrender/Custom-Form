--- 
title: Unit >> Radios
qunit: true
---
<% 
  checked = [2]
%>

<% content_for :js do %>
  $("input[type=radio]").custom_form();
  
  
  module("On instantiation");

  test("Already checked radios should have the active_radio class", function() {
    var checked = $(<%=mapped_selectors "#radio-", checked%>);
    checked.each(function(){
      ok( $(this).parent().hasClass("active_radio"), "The replacement <span> doesn't have the active_radio class" );
    })
  });
  
  module("On click");
  
  test("The radio should be checked if it wasn't", function(){
    $("#radio-1").parent().trigger("click");
    ok($("#radio-1").is(":checked"),"After clicking on the replacement <span>, the associated radio is not checked")
    ok($("#radio-1").parent().hasClass("active_radio"),"After clicking on the replacement <span> , it doesn't have the active_radio class")
  })
  //
  test("The radio should not be unchecked if it was checked", function(){
    $("#radio-1").parent().trigger("click");
    ok($("#radio-1").is(":checked"),"After clicking the replacement <span>, the associated radio gets unchecked")
    ok($("#radio-1").parent().hasClass("active_radio"),"After clicking on the replacement <span>, it doesn't have the active_radio class")
  })
  
  module("When clicking the label");
  
  test("The radio should be checked if it wasn't", function(){
    $("label[for=radio-3]").trigger("click");
    ok($("#radio-3").is(":checked"),"After clicking the label, the associated radio is not checked")
    ok($("#radio-3").parent().hasClass("active_radio"),"After clicking the label, the replacement <span> doesn't have the active_radio class")
  })
  
  test("The radio button should not be unchecked if it was checked", function(){
    $("label[for=radio-3]").trigger("click");
    ok($("#radio-3").is(":checked"),"After clicking the label, the associated radio button gets unchecked")
    ok($("#radio-3").parent().hasClass("active_radio"),"After clicking the label, the replacement <span> doesn't have the active_radio class")
  })
  
  
  module("Calling the 'check' method ")
  
  test("without arguments should not toggle-check the radio",function(){
    var was_checked = $("#radio-8").is(":checked")
    $("#radio-8").custom_form("check")
    ok(was_checked != $("#radio-8").is(":checked"),"After calling the method 'check' on an unchecked radio it changes from "+was_checked.toString()+" to "+(!was_checked).toString())
    
    $("#radio-8").custom_form("check")
    ok(was_checked != $("#radio-8").is(":checked"),"After calling the method 'check'  on a checked radio it changes from "+was_checked.toString()+" to "+(!was_checked).toString())
  })
  
  test("with TRUE should check the radio",function(){
    $("#radio-9").custom_form("check",true)
    ok($("#radio-9").is(":checked"),"After calling the method 'check' the radio button is not checked")
  })
  
  test("with TRUE on an already checked radio button should not uncheck it",function(){
    $("#radio-9").custom_form("check",true)
    ok($("#radio-9").is(":checked"),"After calling the method 'check' the radio button doesn't remain checked")
  })
  
  module('Calling the "check" method ')
  
  test("with FALSE should not uncheck the radio",function(){
    $("#radio-9").custom_form("check",false)
    ok($("#radio-9").is(":checked"),"After calling the method 'check' with false the radio button gets unchecked")
    ok($("#radio-9").parent().hasClass("active_radio"),"After calling the method 'check' with false the replacement <span> doesn't have the active_radio class")
  })
  
  module('Calling the "check" method with FALSE')
  
  test("on an unchecked radio button, should not check it",function(){
    $("#radio-4").custom_form("check",false)
    ok(!$("#radio-4").is(":checked"),"After calling the method 'check' with false on an unchecked radio button, the radio button gets checked")
  })
  
  module("Calling the 'update' method");
  
  test("should reflect the current state of the radio button",function(){
    $("#radio-5").attr("checked",true)
    $("#radio-5").custom_form("update")
    ok($("#radio-5").parent().hasClass("active_radio"),"After calling the method 'update' on a programatically checked input it doesn't get the active_radio class")
    $("#radio-6").attr("checked",true)
    $("#radio-6").custom_form("update")
    ok($("#radio-6").parent().hasClass("active_radio"),"After calling the method 'update' on a programatically checked input it doesn't get the active_radio class")
  })
  
<% end %>

<form autocomplete="off">
  <fieldset>
    <legend>Radios</legend>    
    <% 10.times do |i| %>
      <input type="radio" <%= "checked='checked'" if checked.include?(i)%> id="radio-<%=i%>" name="radio_group_1">
      <label for="radio-<%=i%>">Radio <%=i%></label>
      <br/>
    <% end %>
  </fieldset>
</form>