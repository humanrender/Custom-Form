<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  	<title>Custom-Form tests - Unit >> Checkboxes</title>
    <link rel="stylesheet" href="../../stylesheets/custom_form.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="../../stylesheets/test.css" type="text/css" media="screen" charset="utf-8"/>
    
      <link rel="stylesheet" href="../../javascripts/qunit/qunit-styles.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
    
  	
  </head>
  <body>
    <div class="wrap two-block">
      <div class="content">
        



<form autocomplete="off">
  <fieldset>
    <legend>Checkboxes</legend>    
    
      <input type="checkbox"  id="checkbox-0" value="0" name="checkbox-0">
      <label for="checkbox-0">Checkbox 0</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-1" value="1" name="checkbox-1">
      <label for="checkbox-1">Checkbox 1</label>
      <br/>
    
      <input type="checkbox" checked='checked' id="checkbox-2" value="2" name="checkbox-2">
      <label for="checkbox-2">Checkbox 2</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-3" value="3" name="checkbox-3">
      <label for="checkbox-3">Checkbox 3</label>
      <br/>
    
      <input type="checkbox" checked='checked' id="checkbox-4" value="4" name="checkbox-4">
      <label for="checkbox-4">Checkbox 4</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-5" value="5" name="checkbox-5">
      <label for="checkbox-5">Checkbox 5</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-6" value="6" name="checkbox-6">
      <label for="checkbox-6">Checkbox 6</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-7" value="7" name="checkbox-7">
      <label for="checkbox-7">Checkbox 7</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-8" value="8" name="checkbox-8">
      <label for="checkbox-8">Checkbox 8</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-9" value="9" name="checkbox-9">
      <label for="checkbox-9">Checkbox 9</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-10" value="10" name="checkbox-10">
      <label for="checkbox-10">Checkbox 10</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-11" value="11" name="checkbox-11">
      <label for="checkbox-11">Checkbox 11</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-12" value="12" name="checkbox-12">
      <label for="checkbox-12">Checkbox 12</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-13" value="13" name="checkbox-13">
      <label for="checkbox-13">Checkbox 13</label>
      <br/>
    
      <input type="checkbox"  id="checkbox-14" value="14" name="checkbox-14">
      <label for="checkbox-14">Checkbox 14</label>
      <br/>
    
    <input type="checkbox" id="checkbox-16" value="16" name="checkbox-16" disabled="disabled"/>
    <label for="checkbox-16">Checkbox 16</label><br/>
  </fieldset>
  
  <div id="free.free"></div>
</form>
      </div>
      
      
      <div class="tools">
        
    <h1 id="qunit-header">QUnit Test Suite</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup</div>
  
      </div>
      
    </div>
    <script src="../../javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    
      <script src="../../javascripts/qunit/qunit.js" type="text/javascript" charset="utf-8"></script>
    
    <script src="../../javascripts/custom_form.js" type="text/javascript" charset="utf-8"></script>
    
    <script type="text/javascript" charset="utf-8">
      
  $("input[type=checkbox]").custom_form();
  
  function check_options_integrity(checked){
    $("input[type=checkbox]").each(function(){
      var should_be_checked = checked.indexOf(Number( $(this).val() ) ) != -1;
      var is_checked = $(this).is(":checked");
      ok((should_be_checked && is_checked) || (!should_be_checked && !is_checked))
    })
  }
  
  module("On instantiation");
  
  test("Already checked checkboxes should have the active_checkbox class", function() {
    var checked = $("#checkbox-2,#checkbox-4");
    checked.each(function(){
      ok( $(this).parent().hasClass("active_checkbox"), "The replacement <span> doesn't have the active_checkbox class" );
    })
    check_options_integrity([2,4])
  });
  
  module("On click");
  
  test("The checkbox should be checked if it wasn't", function(){
    $("#checkbox-1").parent().trigger("click");
    ok($("#checkbox-1").is(":checked"),"After clicking on the replacement <span>, the associated checbox is not checked")
    ok($("#checkbox-1").parent().hasClass("active_checkbox"),"After clicking on the replacement <span> it doesn't have the active_checkbox class")
    check_options_integrity([1,2,4])
  })
  
  
  test("The checkbox should be unchecked if it was checked", function(){
    $("#checkbox-1").parent().trigger("click");
    ok(!$("#checkbox-1").is(":checked"),"After clicking the replacement <span>, the associated checkbox is not unchecked")
    ok(!$("#checkbox-1").parent().hasClass("active_checkbox"),"After clicking on the replacement <span>, it still has the active_checkbox class")
    check_options_integrity([2,4])
  })
  
  module("When clicking the label");
  
  test("The checkbox should be checked if it wasn't", function(){
    $("label[for=checkbox-3]").trigger("click");
    ok($("#checkbox-3").is(":checked"),"After clicking the label, the associated checbox is not checked")
    ok($("#checkbox-3").parent().hasClass("active_checkbox"),"After clicking the label, it doesn't have the active_checkbox class")
    check_options_integrity([2,4,3])
  })
  
  test("The checkbox should be unchecked if it was checked", function(){
    $("label[for=checkbox-3]").trigger("click");
    ok(!$("#checkbox-3").is(":checked"),"After clicking the label, the associated checkbox is not unchecked")
    ok(!$("#checkbox-3").parent().hasClass("active_checkbox"),"After clicking the label, it still has the active_checkbox class")
    check_options_integrity([2,4])
  })
  
  module("Calling the 'check' method ")
  
  test("without arguments should toggle-check the checkbox",function(){
    var was_checked = $("#checkbox-8").is(":checked")
    $("#checkbox-8").custom_form("checked")
    ok(was_checked != $("#checkbox-8").is(":checked"),"After calling the method 'check' the checkbox is not toggled from "+was_checked.toString()+" to "+(!was_checked).toString())
    check_options_integrity([2,4,8])
    $("#checkbox-8").custom_form("checked")
    ok(was_checked == $("#checkbox-8").is(":checked"),"After calling the method 'check' the checkbox is not toggled from "+was_checked.toString()+" to "+(!was_checked).toString())
    check_options_integrity([2,4])
    
  })
  
  test("with TRUE should check the checkbox",function(){
    $("#checkbox-9").custom_form("checked",true)
    ok($("#checkbox-9").is(":checked"),"After calling the method 'check' the checkbox is not checked")
    check_options_integrity([2,4,9])
  })
  
  test("with TRUE on an already checked checkbox should not check it",function(){
    $("#checkbox-9").custom_form("checked",true)
    ok($("#checkbox-9").is(":checked"),"After calling the method 'check' the checkbox doesn't remain checked")
    check_options_integrity([2,4,9])
  })
  
  test("with FALSE should uncheck the checkbox",function(){
    $("#checkbox-4").custom_form("checked",false)
    ok(!$("#checkbox-4").is(":checked"),"After calling the method 'check' with false it doesn't uncheck the associated checkbox")
    check_options_integrity([2,9])
  })
  
  test("with FALSE on an unchecked checkbox, should not check it",function(){
    $("#checkbox-4").custom_form("checked",false)
    ok(!$("#checkbox-4").is(":checked"),"After calling the method 'check' with false on an unchecked checkbox, the checkbox gets checked")
    check_options_integrity([2,9])
  })
  
  module("Calling the 'update' method");
  
  test("should reflect the current state of the checkbox",function(){
    $("#checkbox-5").attr("checked",true)
    $("#checkbox-5").custom_form("update")
    ok($("#checkbox-5").parent().hasClass("active_checkbox"),"After calling the method 'update' on a programatically checked input it doesn't get the active_checkbox class")
    check_options_integrity([2,9,5])
    
    $("#checkbox-5").attr("checked",false)
    $("#checkbox-5").custom_form("update")
    ok(!$("#checkbox-5").parent().hasClass("active_checkbox"),"After calling the method 'update' on a programatically uncheckedchecked input it doesn't remove the active_checkbox class")
    check_options_integrity([2,9])
  })
  
  module("On send ");
  test("the correct values should be sent",function(){
    $("form").submit(function(event,b){
      event.preventDefault();
      equal("checkbox-2=2&checkbox-9=9",$(this).serialize())
    })
    $("form").submit();
  });
  
   test("Calling the disabled method",function(){
     $("#checkbox-11").custom_form("disabled",true);
     ok($("#checkbox-11").is(":disabled"),"with true should disable the checkbox")
     ok($("#checkbox-11").parent().hasClass("disabled_checkbox"),"with true should add the disabled class");
     
     $("#checkbox-11").custom_form("disabled",false);
     ok(!$("#checkbox-11").is(":disabled"),"with false should enable the checkbox")
     ok(!$("#checkbox-11").parent().hasClass("disabled_checkbox"),"with false should remove the disabled class")
     
     ok(!$("#checkbox-11").custom_form("disabled"),"Without params should return if the checkbox is disabled (false)")
     $("#checkbox-11").custom_form("disabled",true);
     ok($("#checkbox-11").custom_form("disabled"),"Without params should return if the checkbox is disabled (true)")
     ok(!$("#checkbox-11").custom_form("disabled","none"),"With 'none' should return if the checkbox is not disabled (false)")
     ok($("#checkbox-11").custom_form("disabled","any"),"With 'any' should return if at least one checkbox is disabled (true)")
   });
   
   test("Calling the disabled method on multiple elements",function(){
     $("#checkbox-12, #checkbox-13, #checkbox-14").attr("disabled",null);
     $("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled",true);
     $("#checkbox-12, #checkbox-13, #checkbox-14").each(function(){
       ok($(this).custom_form("disabled"),"Should be disabled if called with true on multiple elements")
     })
     ok($("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled"), "Should return if all elements are disabled")
     $("#checkbox-13").custom_form("disabled",false)
     ok(!$("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled"), "Should return if all elements are disabled, if one of them is enabled it returns false")
     ok($("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled","any"), "With 'any' should return if all elements are enabled, if one of them is disabled it returns false")
     ok(!$("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled","none"), "With 'any' should return if all elements are enabled, if one of them is disabled it returns false")
     
     $("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled",false);
     ok($("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled","none"),"With none, should return true if no checkbox is disabled")
     ok(!$("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled","all"),"With 'all', should return false if all the checkboxes are not disabled")
     ok(!$("#checkbox-12, #checkbox-13, #checkbox-14").custom_form("disabled","any"),"With 'any', should return false if at least one of the checkboxes is not disabled")
   });
   
   test("Already disabled elements should remain disabled",function(){
     ok($("#checkbox-16").is(":disabled"))
     ok($("#checkbox-16").parent().hasClass("disabled_checkbox"));
   })


    </script>
  </body>
</html>
