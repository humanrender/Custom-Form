<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  	<title>Custom-Form tests - Unit >> Radios</title>
    <link rel="stylesheet" href="../../stylesheets/custom_form.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="../../stylesheets/test.css" type="text/css" media="screen" charset="utf-8"/>
    
      <link rel="stylesheet" href="../../javascripts/qunit/qunit-styles.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
    
  	
  </head>
  <body>
    <div class="wrap two-block">
      <div class="content">
        



<form autocomplete="off">
  <fieldset>
    <legend>Radios</legend>    
    
      <input type="radio" value="0"  id="radio-0" name="radio_group_1">
      <label for="radio-0">Radio 0</label>
      <br/>
    
      <input type="radio" value="1"  id="radio-1" name="radio_group_1">
      <label for="radio-1">Radio 1</label>
      <br/>
    
      <input type="radio" value="2" checked='checked' id="radio-2" name="radio_group_1">
      <label for="radio-2">Radio 2</label>
      <br/>
    
      <input type="radio" value="3"  id="radio-3" name="radio_group_1">
      <label for="radio-3">Radio 3</label>
      <br/>
    
      <input type="radio" value="4"  id="radio-4" name="radio_group_1">
      <label for="radio-4">Radio 4</label>
      <br/>
    
      <input type="radio" value="5"  id="radio-5" name="radio_group_1">
      <label for="radio-5">Radio 5</label>
      <br/>
    
      <input type="radio" value="6"  id="radio-6" name="radio_group_1">
      <label for="radio-6">Radio 6</label>
      <br/>
    
      <input type="radio" value="7"  id="radio-7" name="radio_group_1">
      <label for="radio-7">Radio 7</label>
      <br/>
    
      <input type="radio" value="8"  id="radio-8" name="radio_group_1">
      <label for="radio-8">Radio 8</label>
      <br/>
    
      <input type="radio" value="9"  id="radio-9" name="radio_group_1">
      <label for="radio-9">Radio 9</label>
      <br/>
    
  </fieldset>
</form>
      </div>
      
      
      <div class="tools">
        
    <h1 id="qunit-header">QUnit Test Suite</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup</div>
  
      </div>
      
    </div>
    <script src="../../javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    
      <script src="../../javascripts/qunit/qunit.js" type="text/javascript" charset="utf-8"></script>
    
    <script src="../../javascripts/custom_form.js" type="text/javascript" charset="utf-8"></script>
    
    <script type="text/javascript" charset="utf-8">
      
  $("input[type=radio]").custom_form();
  
  function verify_if_checked_and_parent_class(checked){
    $("input[type=radio]").each(function(){
      var should_be_checked = checked.indexOf(Number( $(this).val() ) ) != -1;
      var is_checked = $(this).is(":checked");
      var has_active_class = $(this).parent().hasClass("active_radio")
      if(is_checked)
        ok(has_active_class,"Radio button - "+$(this).val()+" - checking class")
      else
        ok(!has_active_class,"Radio button - "+$(this).val()+" - checking it doesn't have the active_radio class")
      
      ok((should_be_checked && is_checked) || (!should_be_checked && !is_checked),"The radio button  "+$(this).val()+" is checked/unchecked correctly")
    })
  }
  
  module("On instantiation");

  test("Already checked radios should have the active_radio class", function() {
    var checked = $("#radio-2");
    checked.each(function(){
      ok( $(this).parent().hasClass("active_radio"), "The replacement <span> doesn't have the active_radio class" );
    })
    verify_if_checked_and_parent_class([2])
    // run();
  });
  
  function run(){
    module("On click");
  
    test("The radio should be checked if it wasn't", function(){
      $("#radio-1").parent().trigger("click");
      ok($("#radio-1").is(":checked"),"After clicking on the replacement <span>, the associated radio is not checked")
      ok($("#radio-1").parent().hasClass("active_radio"),"After clicking on the replacement <span> , it doesn't have the active_radio class")
      verify_if_checked_and_parent_class([1])
      next();
    })
    
    function next(){
      test("The radio should not be unchecked if it was checked", function(){
        $("#radio-1").parent().trigger("click");
        ok($("#radio-1").is(":checked"),"After clicking the replacement <span>, the associated radio gets unchecked")
        ok($("#radio-1").parent().hasClass("active_radio"),"After clicking on the replacement <span>, it doesn't have the active_radio class")
        verify_if_checked_and_parent_class([1])
        
        next();
      })
      
      function next(){
        module("When clicking the label");
  
        test("The radio should be checked if it wasn't", function(){
          $("label[for=radio-3]").trigger("click");
          ok($("#radio-3").is(":checked"),"After clicking the label, the associated radio is not checked")
          ok($("#radio-3").parent().hasClass("active_radio"),"After clicking the label, the replacement <span> doesn't have the active_radio class")
          verify_if_checked_and_parent_class([3])
          next();
        })
        
        function next(){
          test("The radio button should not be unchecked if it was checked", function(){
            $("label[for=radio-3]").trigger("click");
            ok($("#radio-3").is(":checked"),"After clicking the label, the associated radio button gets unchecked")
            ok($("#radio-3").parent().hasClass("active_radio"),"After clicking the label, the replacement <span> doesn't have the active_radio class")
            verify_if_checked_and_parent_class([3])
          })
  
  
          module("Calling the 'check' method ")
  
          test("without arguments should not toggle-check the radio ",function(){
            var was_checked = $("#radio-8").is(":checked")
            $("#radio-8").custom_form("checked")
            ok(was_checked != $("#radio-8").is(":checked"),"After calling the method 'check' on an unchecked radio it changes from "+was_checked.toString()+" to "+(!was_checked).toString())
            verify_if_checked_and_parent_class([8])
            
            $("#radio-8").custom_form("checked")
            ok(was_checked != $("#radio-8").is(":checked"),"After calling the method 'check'  on a checked radio it changes from "+was_checked.toString()+" to "+(!was_checked).toString())
            verify_if_checked_and_parent_class([8])
            next();
          })
          
          function next(){
            test("with TRUE should check the radio ",function(){
              $("#radio-9").custom_form("checked",true)
              ok($("#radio-9").is(":checked"),"After calling the method 'check' the radio button is not checked")
              verify_if_checked_and_parent_class([9]);
              next();
            })
            
            function next(){
              test("with TRUE on an already checked radio button should not uncheck it ",function(){
                $("#radio-9").custom_form("checked",true)
                ok($("#radio-9").is(":checked"),"After calling the method 'check' the radio button doesn't remain checked")
                verify_if_checked_and_parent_class([9]);
                next();
              })
              
              function next(){
                module('Calling the "check" method ')
  
                test("with FALSE should not uncheck the radio ",function(){
                  $("#radio-9").custom_form("checked",false)
                  ok($("#radio-9").is(":checked"),"After calling the method 'check' with false the radio button gets unchecked")
                  ok($("#radio-9").parent().hasClass("active_radio"),"After calling the method 'check' with false the replacement <span> doesn't have the active_radio class")
                  verify_if_checked_and_parent_class([9])
                  next();
                })
                
                function next(){
                  module('Calling the "check" method with FALSE ')
  
                  test("on an unchecked radio button, should not check it ",function(){
                    $("#radio-4").custom_form("checked",false)
                    ok(!$("#radio-4").is(":checked"),"After calling the method 'check' with false on an unchecked radio button, the radio button gets checked")
                    verify_if_checked_and_parent_class([9])
                    next();
                  })
                  function next(){
                    module("Calling the 'update' method ");
          
                    test("should reflect the current state of the radio button",function(){
                      $("#radio-5").attr("checked",true)
                      $("#radio-5").custom_form("update")
                      ok($("#radio-5").parent().hasClass("active_radio"),"After calling the method 'update' on a programatically checked input it doesn't get the active_radio class")
                      
                      //verify_if_checked_and_parent_class([5])
                      //
                      //$("#radio-6").attr("checked",true)
                      //$("#radio-6").custom_form("update")
                      //ok($("#radio-6").parent().hasClass("active_radio"),"After calling the method 'update' on a programatically checked input it doesn't get the active_radio class")
                      //verify_if_checked_and_parent_class([6])
                    })
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  

    </script>
  </body>
</html>
