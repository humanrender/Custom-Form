(function(d){d._mixin={include:function(j,k){j.call(k.prototype)}};var i=(function(n){function q(s){this.element_id=this.element.attr("id");this.element_name=this.element.attr("name");this.replacement=(s.select_replacement||this.get_replacement).apply(this);this.replace_elements();this.init_replacement();this.init_mouse_events()}function p(s){s?this.replacement.addClass("hover_"+this.element_type):this.replacement.removeClass("hover_"+this.element_type)}function j(){var t=this.mouse_trigger();t.bind("mouseenter",this,this.hover_handler);t.bind("mouseleave",this,this.out_handler);t.bind("click",this,this.click_handler);var s=d("label[for="+this.element_id+"]");if(s.length!=0){s.bind("click",this,l)}}function r(s){s.data.hover(true)}function k(s){s.data.hover(false)}function o(s){this.replacement[s?"addClass":"removeClass"]("active_"+this.element_type)}function l(s){s.preventDefault();s.data.replacement.trigger("click")}function m(s){switch(s){case true:case false:this.element.attr("disabled",s);this.replacement[s?"addClass":"removeClass"]("disabled_"+this.element_type);this.is_disabled=s;return s;case"none":return !this.element.is(":disabled");default:return this.element.is(":disabled")}}return function(){this.init=q;this.hover=p;this.init_mouse_events=j;this.hover_handler=r;this.out_handler=k;this.active_replacement_class=o;this.label_handler=l;this.disabled=m}})();function a(j){this.element=j;this.element_type="select"}a.prototype.mouse_trigger=function(){return d(".select_content",this.replacement)};a.prototype.get_replacement=function(){var j=d("option:selected",this.element);(j.length!=0)||(j=d("option:first-child",this.element));return d("<span class='select'>      <span class='select_content' >        <span class='select_button'>          <span class='select_button_icon'></span>        </span>        <p class='select_label'>"+j.text()+"</p>      </span>    </span>")};a.prototype.init_replacement=function(){var k={width:(this.element_width-parseInt(this.replacement.css("border-left-width"))-parseInt(this.replacement.css("border-right-width")))};this.element.css(k);this.replacement.css(k);var j=d(".select_button",this.replacement);this.select_label=d(".select_label",this.replacement);this.select_label.css({width:(k.width-j.outerWidth()-parseInt(this.select_label.css("padding-left"))-parseInt(this.select_label.css("padding-right"))),"padding-right":0});this.element.bind("change",this,this.select_change)};a.prototype.replace_elements=function(){this.element_width=this.element.outerWidth();this.element.after(this.replacement);this.replacement.append(this.element)};a.prototype.select_change=function(j){j.data.update_label()};a.prototype.update_label=function(){this.select_label.text(d("option:selected",this.element).text())};a.prototype.show_options=function(){this.element.trigger("click")};function g(j){this.element=j;this.element_type="radio";this.uncheckeable=true}function c(j){this.element=j;this.element_type="checkbox";this.uncheckeable=false}c.prototype.mouse_trigger=function(){return this.replacement};c.prototype.replace_elements=function(){this.element.after(this.replacement);this.replacement.append(this.element)};c.prototype.get_replacement=function(){return d("<span class='"+this.element_type+"'></span>")};c.prototype.click_handler=function(j){j.data.checked();j.data.element.triggerHandler("click")};c.prototype.init_replacement=function(){var j=this.element;if(j.is(":checked")){this.checked(true)}if(j.is(":disabled")){this.disabled(true)}};a.prototype.click_handler=function(j){j.data.show_options()};a.initialized=false;a.button_width=0;a.create=function(k){if(!a.initialized){var j=new a(k);a.select_height||(a.select_height=j.element.outerHeight());return j}else{return new a(k)}};a.prototype.update=function(){this.element.trigger("change")};a.prototype.select=function(k){var j=typeof k;switch(j){case"number":this.element.val(k);break;case"function":k.apply(this.element);break;default:(j=="string")||(k=k.to_s);this.element.find("option:contains('"+k+"')").attr("selected",true)}this.update()};c.prototype.checked=function(k){var j=this.element;k=k==undefined?!j.is(":checked"):k;if(!this.uncheckeable||(this.uncheckeable&&k)){j.attr("checked",k);this.active_replacement_class(k);if(k){j.trigger("change")}}};c.prototype.update=function(){this.checked(this.element.is(":checked"))};g.prototype=new c();g.prototype.update=function(){this.checked(this.element.is(":checked"),true)};g.prototype.checked=function(l,k){(l!=undefined)||(l=true);if(l||k){var j=this.element;checked_radios=d(".active_radio").has("[name="+this.element_name+"]").not(this.element_id);if(checked_radios.length!=0){checked_radios.removeClass("active_"+this.element_type)}}c.prototype.checked.call(this,l==undefined?undefined:l)};d._mixin.include(i,c);d._mixin.include(i,g);d._mixin.include(i,a);i.get=function(j){var k=d(j),l=k.attr("type")||k[0].nodeName.toLowerCase();switch(l){case"select":return a.create(k);case"checkbox":return new c(k);case"radio":return new g(k)}};function h(j){j=j||{};return this.each(function(){if(d(this).is("select[size]")||this.hasOwnProperty("custom_form_instance")){return true}var k=i.get(this);k.init(j);this.custom_form_instance=k})}var e=["init","checked","update","select","disabled"];var b={disabled:function(k){(k!=undefined)||(k="all");if(this.length==1){return this[0].custom_form_instance.disabled(k)}var j=k=="any"?false:true;this.each(function(){var l=this.custom_form_instance.disabled(k);switch(k){case"all":if(j&&!l){j=false;return false}break;case"any":if(l){j=true;return false}break;case"none":if(!l){j=false;return false}break}});return j}};function f(k){var j=this;args=Array.prototype.slice.call(arguments,1);if(b.hasOwnProperty(k)){return b[k].apply(this,args)}return j.each(function(){this.custom_form_instance[k].apply(this.custom_form_instance,args)})}d.fn.custom_form=function(j){if(e.indexOf(j)!=-1){return f.apply(this,arguments)}else{if(typeof j==="object"||!j){return h.apply(this,arguments)}else{d.error("Method "+j+" does not exist on jQuery.custom_form")}}}})(jQuery);